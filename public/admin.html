<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <title>Admin Dashboard</title>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <link href="https://fonts.googleapis.com/css2?family=Kanit:wght@300;400;600&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Kanit', sans-serif; background: #0f172a; color: white; padding: 40px; }
        .panel { background: rgba(255,255,255,0.05); padding: 30px; border-radius: 20px; border: 1px solid rgba(255,255,255,0.1); max-width: 800px; margin: auto; }
        input { background: rgba(255,255,255,0.1); border: 1px solid rgba(255,255,255,0.2); color: white; padding: 12px; border-radius: 8px; margin-bottom: 10px; width: 100%; box-sizing: border-box; }
        .btn-add { background: #10b981; color: white; border: none; padding: 12px 20px; border-radius: 8px; cursor: pointer; width: 100%; font-weight: bold; }
        .item-list { margin-top: 30px; }
        .item { background: rgba(255,255,255,0.03); padding: 15px; border-radius: 10px; display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px; border-left: 4px solid #38bdf8; }
        .btn-del { background: #ef4444; color: white; border: none; padding: 8px 15px; border-radius: 6px; cursor: pointer; }
    </style>
</head>
<body>
    <div class="panel">
        <h2 style="color: #38bdf8;">üì¶ ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏™‡∏ï‡πá‡∏≠‡∏Å‡∏≠‡∏∏‡∏õ‡∏Å‡∏£‡∏ì‡πå‡∏Ñ‡∏≠‡∏°‡∏û‡∏¥‡∏ß‡πÄ‡∏ï‡∏≠‡∏£‡πå</h2>
        <input type="text" id="name" placeholder="‡∏ä‡∏∑‡πà‡∏≠‡∏≠‡∏∏‡∏õ‡∏Å‡∏£‡∏ì‡πå (‡πÄ‡∏ä‡πà‡∏ô RTX 4090)">
        <input type="number" id="price" placeholder="‡∏£‡∏≤‡∏Ñ‡∏≤">
        <input type="text" id="img" placeholder="‡∏•‡∏¥‡∏á‡∏Å‡πå‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û">
        <button class="btn-add" onclick="addItem()">‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏Ç‡πâ‡∏≤‡∏Ñ‡∏•‡∏±‡∏á‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤</button>

        <div class="item-list" id="admin-list"></div>
    </div>

    <script>
        async function addItem() {
            const data = { name: document.getElementById('name').value, price: document.getElementById('price').value, img: document.getElementById('img').value };
            await fetch('/api/products', { method: 'POST', headers: {'Content-Type': 'application/json'}, body: JSON.stringify(data) });
            Swal.fire('‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à!', '‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Ç‡∏≠‡∏á‡πÅ‡∏•‡πâ‡∏ß', 'success').then(() => location.reload());
        }
        async function loadItems() {
            const res = await fetch('/api/products');
            const data = await res.json();
            document.getElementById('admin-list').innerHTML = data.map(p => `
                <div class="item">
                    <span><b>${p.name}</b> - ${p.price.toLocaleString()}‡∏ø</span>
                    <button class="btn-del" onclick="delItem('${p._id}')">‡∏•‡∏ö</button>
                </div>
            `).join('');
        }
        async function delItem(id) {
            if(confirm('‡∏à‡∏∞‡∏•‡∏ö‡∏à‡∏£‡∏¥‡∏á‡πÉ‡∏ä‡πà‡πÑ‡∏´‡∏°?')) {
                await fetch(`/api/products/${id}`, { method: 'DELETE' });
                loadItems();
            }
        }
        loadItems();
    </script>
</body>
</html>