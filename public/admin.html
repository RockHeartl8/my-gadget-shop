<div id="admin-product-list" style="margin-top: 30px;">
    <h3>รายการสินค้าในคลัง</h3>
    <div id="list-container"></div>
</div>

<script>
// ฟังก์ชันดึงของมาโชว์พร้อมปุ่มลบ
async function loadAdminProducts() {
    const res = await fetch('/api/products');
    const products = await res.json();
    const container = document.getElementById('list-container');
    container.innerHTML = products.map(p => `
        <div style="background: rgba(255,255,255,0.1); padding: 10px; margin: 5px; border-radius: 8px; display: flex; justify-content: space-between;">
            <span>${p.name} - ${p.price} บาท</span>
            <button onclick="deleteProduct('${p._id}')" style="width: auto; background: #ef4444; padding: 5px 10px;">ลบ</button>
        </div>
    `).join('');
}

async function deleteProduct(id) {
    if(confirm('ยืนยันการลบสินค้า?')) {
        await fetch(`/api/products/${id}`, { method: 'DELETE' });
        loadAdminProducts(); // รีเฟรชรายการ
    }
}
loadAdminProducts(); // รันตอนเปิดหน้า
</script>