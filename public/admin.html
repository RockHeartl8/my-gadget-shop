<div class="container">
    <h2>จัดการคลังอุปกรณ์คอมพิวเตอร์</h2>
    <input type="text" id="name" placeholder="ชื่ออุปกรณ์ (เช่น RTX 4060)">
    <input type="number" id="price" placeholder="ราคา">
    <input type="text" id="img" placeholder="ลิงก์รูปภาพ">
    <button onclick="addProduct()">เพิ่มเข้าคลัง</button>
    <hr>
    <div id="product-list"></div>
</div>

<script>
async function addProduct() { // ระบบเติมของ
    const data = { name: document.getElementById('name').value, price: document.getElementById('price').value, img: document.getElementById('img').value };
    await fetch('/api/products', { method: 'POST', headers: {'Content-Type': 'application/json'}, body: JSON.stringify(data) });
    location.reload();
}

async function loadProducts() { // ระบบลบของ
    const res = await fetch('/api/products');
    const products = await res.json();
    document.getElementById('product-list').innerHTML = products.map(p => `
        <div>${p.name} - ${p.price}฿ <button onclick="deleteProduct('${p._id}')">ลบ</button></div>
    `).join('');
}

async function deleteProduct(id) { // ฟังก์ชันลบ
    await fetch(`/api/products/${id}`, { method: 'DELETE' });
    loadProducts();
}
loadProducts();
</script>